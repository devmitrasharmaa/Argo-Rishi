{% extends 'layout.html' %}

{% block content %}
<div class="login-register-container">
    <h2>Rishi Sahayog</h2>
    <form id="mode-selection-form" method="POST" action="{{ url_for('rishi_sahayog') }}">
        <label for="mode">Select your mode of input:</label>
        <select name="mode" id="mode" onchange="this.form.submit()">
            <option value="type" {% if selected_mode == 'type' %}selected{% endif %}>Type</option>
            <option value="speak" {% if selected_mode == 'speak' %}selected{% endif %}>Speak</option>
        </select>
    </form>
    
    {% if selected_mode == 'type' %}
    <form id="sahayog-form" method="POST">
        <input type="hidden" name="mode" value="type">
        <input type="text" id="user-input" name="user_input" placeholder="Ask your question..." required>
        <button type="submit">Submit</button>
    </form>
    {% elif selected_mode == 'speak' %}
    <form id="sahayog-form" method="POST">
        <input type="hidden" name="mode" value="speak">
        <button type="submit">Start Speaking</button>
    </form>
    {% endif %}

    <div id="response-container">
        {% if response %}
            <p><strong>Bot:</strong> {{ response }}</p>
        {% endif %}
    </div>
</div>
{% endblock content %}
